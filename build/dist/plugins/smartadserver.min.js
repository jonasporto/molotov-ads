!function e(t,o,r){function n(s,a){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){var o=t[s][1][e];return n(o||e)},d,d.exports,e,t,o,r)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){function t(e){return e instanceof Function?e():e}e.valueFor=t}(o.Util||(o.Util={}))},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(e){this.HTMLElement=e,this.lazyloadEnabled=!1,this.autoRefreshEnabled=!1,this.autoRefreshCounter=1}return e}();o.AdSlot=r},{}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./logger"),n=e("./viewport");!function(e){function t(e,t){e.autoRefreshEnabled&&(e.autoRefreshCounter<=e.autoRefreshLimit?(r.Logger.infoWithTime(e.name,"refreshing in",e.autoRefreshTime,"seconds (",e.autoRefreshCounter,"/",e.autoRefreshLimit,")"),setTimeout(o,1e3*e.autoRefreshTime,e,t),e.autoRefreshCounter++):(e.autoRefreshEnabled=!1,r.Logger.infoWithTime(e.name,"auto refresh ended")))}function o(t,o){r.Logger.logWithTime(t.name,"starting refresh for auto rotate"),e.refreshIfViewable(t,o)}function i(t,o){if(document.hidden){r.Logger.logWithTime(t.name,"marked for refresh on visibilitychange");var i=function(){e.refreshIfViewable(t,o),document.removeEventListener("visibilitychange",i)};return void document.addEventListener("visibilitychange",i)}if(n.Viewport.getCurrentViewabilityPercentage(t.HTMLElement)>=50)o(t);else{r.Logger.logWithTime(t.name,"viewablity lower than 50%, not refreshing");var s=setInterval(function(){n.Viewport.getCurrentViewabilityPercentage(t.HTMLElement)>=50&&(o(t),clearInterval(s))},5e3)}}e.start=t,e.refreshIfViewable=i}(o.AutoRefresh||(o.AutoRefresh={}))},{"./logger":4,"./viewport":5}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function o(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];t(l(),"->",e.join(" "))}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r(l(),"->",e.join(" "))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function a(){}function l(){return(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()}location.hash.indexOf("development");e.log=t,e.logWithTime=o,e.info=r,e.infoWithTime=n,e.warn=i,e.error=s,e.consoleWelcomeMessage=a}(o.Logger||(o.Logger={}))},{}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){function t(e,t){var o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom-t<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)}function o(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function r(e){var t=e.getBoundingClientRect().top,o=t>0?window.innerHeight-t:Math.abs(t),r=o/e.clientHeight;return r=t>0?r:1-r,r<0&&(r=0),r>1&&(r=1),100*r}e.isElementInViewport=t,e.isElementVisible=o,e.getCurrentViewabilityPercentage=r}(o.Viewport||(o.Viewport={}))},{}],6:[function(e,t,o){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../modules/adslot"),i=e("../../modules/logger"),s=e("../../helpers/util"),a=function(e){function t(t){var o=e.call(this,t)||this;o.HTMLElement=t;var r=t.dataset;return o.name=t.id,o.smartAdId=r.madSmartadId,o.autoRefreshTime=Number(r.madAutoRefreshInSeconds)||0,o.autoRefreshLimit=Number(r.madAutoRefreshLimit)||0,o.lazyloadOffset=Number(r.madLazyloadOffset),o.autoRefreshEnabled=o.autoRefreshTime>0,o.lazyloadOffset&&(o.lazyloadOffset=o.lazyloadOffset||0,o.lazyloadEnabled=!0),o}return r(t,e),t.prototype.refresh=function(e){if(i.Logger.logWithTime(e.name,"started refreshing"),!pbjs)return sas.refresh(this.smartAdId);pbjs.que.push(function(){pbjs.requestBids({timeout:2e3,adUnitCodes:[e.smartAdId],bidsBackHandler:function(){pbjs.setTargetingForGPTAsync([e.smartAdId]),sas.cmd.push(function(){i.Logger.log('Will perform "std" request'),sas.call("std",{siteId:this.options.siteId,pageId:this.options.pageId,formatId:e.smartAdId,target:s.Util.valueFor(this.options.target)})})}})})},t.prototype.render=function(){this.lazyloadEnabled||sas.render(this.smartAdId)},t}(n.AdSlot);o.SmartAdSlot=a},{"../../helpers/util":1,"../../modules/adslot":2,"../../modules/logger":4}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./smart.adslot"),n=e("../../modules/logger"),i=e("../../modules/viewport"),s=e("../../modules/autorefresh"),a=e("../../helpers/util"),l=function(){function e(){this.name="SmartAdServer",this.slots={}}return e.prototype.init=function(e){var t=this;return this.slots=this.getSlots(),new Promise(function(o,r){window.adserverCall=function(){sas.cmd.push(function(){n.Logger.log('Will perform "onecall" request'),sas.call("onecall",{siteId:e.siteId,pageId:e.pageId,formatId:e.formatId,target:a.Util.valueFor(e.target)})}),sas.cmd.push(function(){n.Logger.log("Will perform render");for(var e in t.slots)t.slots[e].render(),n.Logger.log(t.name,"ad slot rendered: ",t.slots[e]);o()})},window.sasCallback=function(o){n.Logger.logWithTime(sas.info[o].divId,"finished slot rendering");var r=t.slots[sas.info[o].divId];s.AutoRefresh.start(r,t.autoRefresh),e.sasCallback&&e.sasCallback(o)},t.onScrollRefreshLazyloadedSlots()})},e.prototype.onScrollRefreshLazyloadedSlots=function(){var e=this;window.addEventListener("scroll",function(t){for(var o in e.slots){var r=e.slots[o];r.lazyloadEnabled&&i.Viewport.isElementInViewport(r.HTMLElement,r.lazyloadOffset)&&(r.refresh(r),r.lazyloadEnabled=!1)}})},e.prototype.autoRefresh=function(e){n.Logger.logWithTime(e.name,"started refreshing"),e.refresh(e)},e.prototype.getSlots=function(){var e={};for(var t in window._molotovAds.slots){var o=window._molotovAds.slots[t].HTMLElement;""!==o.dataset.madAdunit&&(e[o.id]=new r.SmartAdSlot(o),window._molotovAds.slots[o.id]=e[o.id])}return e},e}();o.SmartPlugIn=l,window._molotovAds.loadPlugin(new l)},{"../../helpers/util":1,"../../modules/autorefresh":3,"../../modules/logger":4,"../../modules/viewport":5,"./smart.adslot":6}]},{},[6,7]);